<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AA制计算器</title>
</head>
<body>
    <div>Generated by ChatGPT.</div>
    <div>
        <label>支付者:</label>
        <input type="text" id="payer">
    </div>
    <div>
        <label>金额:</label>
        <input type="number" id="amount">
    </div>
    <div>
        <label>参与者 (逗号分隔):</label>
        <input type="text" id="participants">
    </div>
    <button onclick="addExpense()">添加支出</button>
    
    <h2>结算结果:</h2>
    <ul id="settlementList"></ul>

    <script>
        let expenses = [];
        let settlement = {};

        function addExpense() {
            const payer = document.getElementById('payer').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const participants = document.getElementById('participants').value.split(',');

            expenses.push({ payer, amount, participants });
            calculateSettlement();
        }

        function calculateSettlement() {
            settlement = {};

            expenses.forEach(expense => {
                const share = expense.amount / expense.participants.length;

                if (!settlement[expense.payer]) {
                    settlement[expense.payer] = 0;
                }
                settlement[expense.payer] += expense.amount;

                expense.participants.forEach(participant => {
                    if (!settlement[participant.trim()]) {
                        settlement[participant.trim()] = 0;
                    }
                    settlement[participant.trim()] -= share;
                });
            });

            displaySettlement();
        }

        function displaySettlement() {
            const list = document.getElementById('settlementList');
            list.innerHTML = '';

            for (let person in settlement) {
                const li = document.createElement('li');
                li.textContent = `${person}: ${settlement[person].toFixed(2)}`;
                list.appendChild(li);
            }
        }
    </script>
</body>
</html>
